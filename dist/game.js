(()=>{"use strict";setTimeout((()=>{const t=document.createElement("h5");t.innerText=`\n        ${JSON.stringify(location.href)},\n        ${JSON.stringify(window.TelegramGameProxy.initParams)},\n        ${JSON.stringify(window.TelegramGameProxy.shareScore)}\n    `,document.body.append(t)}),2e3),setTimeout((()=>{window.location.href="https://t.me/leeJDragon_bot/app"}),8e3);class t{constructor(t,e,s,a,i,o){this.sprite=h.add.sprite(t,e,s),this.sprite.animations.add("idle",[0],0),this.sprite.animations.add("attack",[1,2,3,4,0],12),this.sprite.animations.play("idle"),this.attack_ref=a,this.cooldown=!1,this.x=this.sprite.x,this.y=this.sprite.y,this.button=h.add.button(this.x-35,this.y+160,i,this.attack,this,0,0,1,0),this.button.scale.setTo(2,2),this.slime_frames=o}attack(){this.cooldown||d||(this.sprite.animations.play("attack"),o.create(this.sprite.x,this.sprite.y-10,this.attack_ref).body.velocity.y=s,this.cooldown=!0,h.time.events.add(e,(function(){this.cooldown=!1}),this))}}const e=150,s=-1e3;var a,i,o,n,r,h=new Phaser.Game(720,1280,Phaser.AUTO,"game_div",{preload:function(){h.load.image("background","assets/map.png"),h.load.bitmapFont("heartbit","assets/heartbit.png","assets/heartbit.fnt"),h.load.bitmapFont("heartbit-72","assets/heartbit-72.png","assets/heartbit-72.fnt"),h.load.image("heart","assets/heart.png"),h.load.spritesheet("knight","assets/knight-64.png",64,104),h.load.spritesheet("mage","assets/mage-64.png",64,108),h.load.spritesheet("ranger","assets/ranger-64.png",64,108),h.load.image("fireball","assets/fireball.png"),h.load.image("sword_wave","assets/sword_wave.png"),h.load.image("arrow","assets/arrow.png"),h.load.spritesheet("slimes","assets/slimes.png",18,16,9),h.load.spritesheet("book_btn","assets/book_btn.png",64,64),h.load.spritesheet("sword_btn","assets/sword_btn.png",64,64),h.load.spritesheet("bow_btn","assets/bow_btn.png",64,64)},create:function(){h.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,h.stage.backgroundColor="rgb(50, 50, 50)";var e=h.add.sprite(h.width/2,0,"background");a=.8*e.height,e.x-=e.width/2,r=h.add.bitmapText(.75*h.width,.85*h.height,"heartbit","Score: "+m,48),h.physics.startSystem(Phaser.Physics.ARCADE);var s=new t(h.width/2-205,h.height/2+325,"mage","fireball","book_btn",[6,7,8]),d=new t(h.width/2-35,h.height/2+325,"knight","sword_wave","sword_btn",[0,1,2]),c=new t(h.width/2+145,h.height/2+325,"ranger","arrow","bow_btn",[3,4,5]);i=[s,d,c],(o=h.add.group()).enableBody=!0,o.setAll("checkWorldBounds",!0),o.setAll("outOfBoundsKill",!0),(n=h.add.group()).enableBody=!0;for(var p=0;p<3;p++)l.push(h.add.sprite((.05*p+.8)*h.width,.02*h.height,"heart"))},update:function(){d||(c||(h.time.events.add(f,_,this,i[Math.floor(Math.random()*i.length)]),c=!0),h.physics.arcade.overlap(n,o,k,(function(t,e){return!(t.aysncDestroy||e.asyncDestroy)}),this));if(0!=p.length){var t=p[0];t.y>a&&(g.enemies.push(t),d||x())}g.enemies.forEach((function(t,e){var s=p.indexOf(t);-1!=s&&p.splice(s,1),n.remove(t,!0)}),this),g.projectiles.forEach((function(t,e){o.remove(t,!0)}),this)}}),d=!1,c=!1,l=[],p=[],g={enemies:[],projectiles:[]},m=0,b=100;const u=5,w=500;var f=2300;const y=50,v=500;function _(t){var e=n.create(t.x,-10,"slimes");e.scale.set(3.5,3.5),e.animations.add("idle",t.slime_frames,9,!0),e.animations.play("idle"),e.body.velocity.y=b,c=!1,p.push(e)}function k(t,e){t==p[0]?(m+=10,b=Math.min(b+u,w),f=Math.max(f-y,v),r.setText("Score: "+m),g.enemies.push(t)):l.length>0&&(l.shift().destroy(),0==l.length&&x()),g.projectiles.push(e)}function x(){h.add.bitmapText(h.width/2-150,.3*h.height,"heartbit-72","GAME OVER",72),h.add.bitmapText(h.width/2-150,.35*h.height,"heartbit-72","Your score: "+m,72),d=!0;var t=T("uid"),e=T("msgid"),s=T("chatid"),a=T("iid");t&&e&&s?$.get("/setscore/uid/"+t+"/chat/"+s+"/msg/"+e+"/score/"+m):t&&a&&$.get("/setscore/uid/"+t+"/iid/"+a+"/score/"+m)}function T(t){var e=void 0;return tmp=[],location.search.substr(1).split("&").forEach((function(s){tmp=s.split("="),tmp[0]===t&&(e=decodeURIComponent(tmp[1]))})),e}})();